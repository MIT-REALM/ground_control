<!--
    Launch simulators for two turtlebots and an f1tenth platform
-->

<launch>
    <arg name="visualizer_position_topics" default="[
        /vicon/realm_f1tenth/realm_f1tenth]"/>
    <arg name="visualizer_position_names" default="[f1tenth]"/>

    <arg name="scale" default="1.0"/>
    <arg name="x_offset" default="-1.48"/>
    <arg name="y_offset" default="-3.8"/>

    <arg name="v_ref" default="0.764"/>

    <arg name="base_path" default="$(find rgc_control)/saved_policies/ICRA_experiments_new"/>
    <arg name="filename" default="initial_20.pkl"/>

    <!-- Start the F1Tenth simulator -->
    <!-- <include file="$(find rgc)/launch/sim/f1tenth_simulator.launch"> -->
    <arg name="position_topic" default="/vicon/realm_f1tenth/realm_f1tenth"/>
    <arg name="control_topic" default="/vesc/high_level/ackermann_cmd_mux/input/nav_0"/>
    <!-- <arg name="base_path" default="$(arg base_path)"/> -->
    <!-- <arg name="filename" default="$(arg filename)"/> -->

    <!-- <arg name="scale" default="$(arg scale)"/>
    <arg name="x_offset" default="$(arg x_offset)"/>
    <arg name="y_offset" default="$(arg y_offset)"/> -->
    <!-- </include> -->

    <node name="simple_visualizer" pkg="rgc_simulator" type="simple_visualizer.py" output="screen">
        <rosparam param="visualizer_position_topics" subst_value="True">$(arg visualizer_position_topics)</rosparam>
        <rosparam param="visualizer_position_names" subst_value="True">$(arg visualizer_position_names)</rosparam> 
        <param name="trajectory/base_path" type="string" value="$(arg base_path)"/>
        <param name="trajectory/filename" type="string" value="$(arg filename)"/>

        <param name="v_ref" type="double" value="$(arg v_ref)"/>

        <param name="scale" type="double" value="$(arg scale)"/>
        <param name="x_offset" type="double" value="$(arg x_offset)"/>
        <param name="y_offset" type="double" value="$(arg y_offset)"/>
    </node>
</launch>